(function(t){function e(e){for(var i,s,r=e[0],u=e[1],c=e[2],l=0,d=[];l<r.length;l++)s=r[l],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);m&&m(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,s=1;s<n.length;s++){var r=n[s];0!==o[r]&&(i=!1)}i&&(a.splice(e--,1),t=u(u.s=n[0]))}return t}var i={},s={app:0},o={app:0},a=[];function r(t){return u.p+"js/"+({}[t]||t)+"."+{"chunk-0736b232":"e5c79ab9","chunk-0d609f46":"e45c44fb","chunk-1f813ac1":"efeb39d5","chunk-28f043b5":"e09a8698","chunk-3bececd4":"5ad6fe10","chunk-3e22c0ac":"5538731f","chunk-5b127eb3":"5ad2aad3","chunk-6ab6df98":"3177139c","chunk-6b5519b9":"29d924a9","chunk-b9064b7c":"c3b233db","chunk-ce90f6ac":"6291ed23","chunk-e1702c02":"2e119fc3","chunk-f04944e4":"f03546e8","chunk-ff47db86":"6ace3a52","chunk-1640127b":"7c5aaace"}[t]+".js"}function u(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(t){var e=[],n={"chunk-0736b232":1,"chunk-0d609f46":1,"chunk-1f813ac1":1,"chunk-28f043b5":1,"chunk-3bececd4":1,"chunk-3e22c0ac":1,"chunk-5b127eb3":1,"chunk-6ab6df98":1,"chunk-6b5519b9":1,"chunk-b9064b7c":1,"chunk-ce90f6ac":1,"chunk-e1702c02":1,"chunk-f04944e4":1,"chunk-ff47db86":1,"chunk-1640127b":1};s[t]?e.push(s[t]):0!==s[t]&&n[t]&&e.push(s[t]=new Promise((function(e,n){for(var i="css/"+({}[t]||t)+"."+{"chunk-0736b232":"962d9795","chunk-0d609f46":"d52cf4e7","chunk-1f813ac1":"962d9795","chunk-28f043b5":"10d80509","chunk-3bececd4":"50c7687d","chunk-3e22c0ac":"77c684cf","chunk-5b127eb3":"4aaabdd8","chunk-6ab6df98":"962d9795","chunk-6b5519b9":"33110c69","chunk-b9064b7c":"962d9795","chunk-ce90f6ac":"0b869637","chunk-e1702c02":"c3391ade","chunk-f04944e4":"962d9795","chunk-ff47db86":"962d9795","chunk-1640127b":"a6b8b67a"}[t]+".css",o=u.p+i,a=document.getElementsByTagName("link"),r=0;r<a.length;r++){var c=a[r],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===i||l===o))return e()}var d=document.getElementsByTagName("style");for(r=0;r<d.length;r++){c=d[r],l=c.getAttribute("data-href");if(l===i||l===o)return e()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=e,m.onerror=function(e){var i=e&&e.target&&e.target.src||o,a=new Error("Loading CSS chunk "+t+" failed.\n("+i+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=i,delete s[t],m.parentNode.removeChild(m),n(a)},m.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(m)})).then((function(){s[t]=0})));var i=o[t];if(0!==i)if(i)e.push(i[2]);else{var a=new Promise((function(e,n){i=o[t]=[e,n]}));e.push(i[2]=a);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=r(t);var d=new Error;c=function(e){l.onerror=l.onload=null,clearTimeout(m);var n=o[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",d.name="ChunkLoadError",d.type=i,d.request=s,n[1](d)}o[t]=void 0}};var m=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(e)},u.m=t,u.c=i,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)u.d(n,i,function(e){return t[e]}.bind(null,i));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/",u.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var m=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"09fb":function(t,e,n){"use strict";var i=n("c960"),s=n.n(i);s.a},"12fc":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"danmu-send",class:t.css},[t.isLogin?n("div",{staticClass:"danmu-input-wrapper"},[n("input",{staticClass:"danmu-input",attrs:{type:"text",placeholder:"发送弹幕"},domProps:{value:t.danmuText},on:{input:function(e){return t.$emit("input-danmu",e.target.value)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.shootDanmu(t.danmuType,t.danmuColor)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:void e.stopPropagation()},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"]))return null;e.stopPropagation()},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"]))return null;e.stopPropagation()},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"]))return null;e.stopPropagation()}]}}),n("div",{staticClass:"icon icon-setting danmu-type"},[n("div",{staticClass:"danmu-type-box"},[n("div",{staticClass:"selection-box"},[n("span",[t._v("模式")]),n("div",{staticClass:"danmu-mode"},[n("div",{staticClass:"danmu-mode-type",class:"roll"===t.danmuType?"selected":"",on:{click:function(e){return t.setDanmuType("roll",t.danmuColor)}}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"}},[n("path",{attrs:{d:"M23 3H5a4 4 0 00-4 4v14a4 4 0 004 4h18a4 4 0 004-4V7a4 4 0 00-4-4zM11 9h6a1 1 0 010 2h-6a1 1 0 010-2zm-3 2H6V9h2v2zm4 4h-2v-2h2v2zm9 0h-6a1 1 0 010-2h6a1 1 0 010 2z"}})]),n("span",[t._v("滚动")])]),n("div",{staticClass:"danmu-mode-type",class:"top"===t.danmuType?"selected":"",on:{click:function(e){return t.setDanmuType("top",t.danmuColor)}}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"}},[n("path",{attrs:{d:"M23 3H5a4 4 0 00-4 4v14a4 4 0 004 4h18a4 4 0 004-4V7a4 4 0 00-4-4zM9 9H7V7h2v2zm4 0h-2V7h2v2zm4 0h-2V7h2v2zm4 0h-2V7h2v2z"}})]),n("span",[t._v("顶部")])]),n("div",{staticClass:"danmu-mode-type",class:"bottom"===t.danmuType?"selected":"",on:{click:function(e){return t.setDanmuType("bottom",t.danmuColor)}}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"}},[n("path",{attrs:{d:"M23 3H5a4 4 0 00-4 4v14a4 4 0 004 4h18a4 4 0 004-4V7a4 4 0 00-4-4zM9 21H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"}})]),n("span",[t._v("底部")])])])]),n("div",{staticClass:"selection-box"},[n("span",[t._v("颜色")]),n("div",{staticClass:"color-items"},t._l(t.colorList,(function(e){return n("span",{key:e,class:t.danmuColor===e?"selected":"",style:{"background-color":e},on:{click:function(n){return t.setDanmuType(t.danmuType,e)}}})})),0)])])])]):n("span",{staticClass:"danmu-input to-login"},[t._v(" 请先 "),n("a",{attrs:{href:"#"}},[t._v("登录")])]),n("input",{staticClass:"danmu-submit",attrs:{type:"button",value:"发送"},on:{click:t.shootDanmu}})])},s=[],o={model:{prop:"danmuText",event:"input-danmu"},props:{css:{type:String,default:""},danmuText:{type:String,default:""},danmuType:{type:String,default:"roll"},danmuColor:{type:String,default:"#FFFFFF"}},data:function(){return{colorList:["#FE0302","#FF7204","#FFAA02","#FFD302","#FFFF00","#A0EE00","#00CD00","#019899","#4266BE","#89D5FF","#CC0273","#222222","#9B9B9B","#FFFFFF"]}},methods:{setDanmuType:function(t,e){this.$emit("setDanmuType",t,e)},shootDanmu:function(){this.$emit("shootDanmu")}},computed:{isLogin:function(){return this.$store.state.isLogin}}},a=o,r=(n("acab"),n("2877")),u=Object(r["a"])(a,i,s,!1,null,null,null);e["default"]=u.exports},"18de":function(t,e,n){},"19c7":function(t,e,n){},2053:function(t,e,n){"use strict";var i=n("18de"),s=n.n(i);s.a},2395:function(t,e,n){},"2af4":function(t,e,n){},3069:function(t,e,n){},3251:function(t,e,n){},"328b":function(t,e,n){},"3ea0":function(t,e,n){},"4a6b":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e623"),n("e379"),n("5dc8"),n("37e1");var i=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{ref:"page",staticClass:"page-box",on:{mousedown:t.toggleNavNarrow}},[n("Header"),n("keep-alive",[n("router-view")],1),n("Footer")],1)])},o=[],a=n("5530"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{staticClass:"nav-link"}),n("div",{staticClass:"search-box",attrs:{tabindex:"1"},on:{mousedown:function(e){return e.stopPropagation(),t.toShow(e)}}},[n("form",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"search",attrs:{type:"text",autocomplete:"off"},domProps:{value:t.keyword},on:{blur:t.toHide,input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),n("button",{staticClass:"search-btn",on:{click:function(e){return e.preventDefault(),t.goToSearch(e)}}},[n("svg",{attrs:{viewBox:"0 0 1075 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15"}},[n("path",{attrs:{d:"M715.509344 578.848102m-54.305801 54.305801l0 0q-54.305801 54.305801 0 108.611601l253.42707 253.427071q54.305801 54.305801 108.611602 0l0 0q54.305801-54.305801 0-108.611602l-253.427071-253.42707q-54.305801-54.305801-108.611601 0Z"}}),n("path",{attrs:{d:"M661.203543 633.153903a281.6 281.6 0 1 1-398.242539-398.24254 281.6 281.6 0 0 1 398.242539 398.24254z m108.611601 108.611601a435.2 435.2 0 1 0-615.465742-615.465742 435.2 435.2 0 0 0 615.465742 615.465742z"}})])])]),n("ul",{class:{active:t.isShow}},t._l(t.searchList,(function(e,i){return n("li",{key:i},[n("a",{attrs:{href:e.href,target:"_blank"}},[t._v(t._s(e.keyword))]),n("svg",{staticClass:"icon",attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},on:{click:function(e){return t.delThisItem(i)}}},[n("path",{attrs:{d:"M81.3056 203.3664l762.5728 762.5728c22.7328 22.7328 63.2832 18.944 90.5216-8.192 27.2384-27.3408 30.9248-67.8912 8.192-90.5216L180.224 104.6528C157.3888 81.92 116.736 85.6064 89.6 112.8448c-27.2384 27.3408-30.9248 67.7888-8.192 90.5216z"}}),n("path",{attrs:{d:"M844.8 103.7312L80.4864 868.0448c-22.2208 22.2208-18.1248 62.3616 9.216 89.6 27.136 27.2384 67.2768 31.3344 89.4976 9.216l764.3136-764.416c22.2208-22.2208 18.1248-62.2592-9.216-89.6-27.136-27.2384-67.2768-31.3344-89.4976-9.1136z"}})])])})),0)]),n("user-center")],1)},u=[],c=(n("a434"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-center"},[n("div",{staticClass:"search-icon"}),t.isLogin?n("div",{staticClass:"user-signin"},[t._m(0),t._m(1),t._m(2)]):n("div",{staticClass:"user-logout"},[t._m(3),t._m(4),t._m(5)]),t._m(6)])}),l=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"signin-face"},[n("a",{attrs:{href:"#"}},[n("img",{attrs:{src:"http://localhost:3000/images/70a44598a0fc5c3f3539dd2e22890f674e0b8678.png@144w_144h.webp"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"item"},[n("a",{attrs:{href:"#"}},[t._v("消息")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"item"},[n("a",{attrs:{href:"#"}},[t._v("历史")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"logout-face"},[i("a",{attrs:{href:"/login"}},[i("img",{attrs:{src:n("9841")}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"item"},[n("a",{attrs:{href:"/login"}},[t._v("登录")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"item"},[n("a",{attrs:{href:"/register"}},[t._v("注册")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a",{staticClass:"refrence",attrs:{href:"https://github.com/Mubens/stress-free-tv",target:"_blank"}},[t._v("GitHub")])])}],d={computed:{isLogin:function(){return this.$store.state.isLogin}}},m=d,h=(n("91ca"),n("2877")),f=Object(h["a"])(m,c,l,!1,null,"699087a8",null),p=f.exports,v=n("68fe"),g={data:function(){return{keyword:"",searchList:[],isShow:!1,timer:null}},methods:{toShow:function(){var t=this;setTimeout((function(){t.isShow=!0}))},toHide:function(t){this.isShow=!1},goToSearch:function(){var t=this.keyword,e="http://localhost:8080/search?keyword=".concat(t);window.open(e,"_blank"),this.searchList.unshift({keyword:t,href:e}),this.searchList.length>10&&this.searchList.pop(),this.saveSearchList()},getSearchList:function(){var t=Object(v["getLocal"])("sftv-search");this.searchList=t||[]},saveSearchList:function(){Object(v["setLocal"])("sftv-search",this.searchList)},delThisItem:function(t){this.searchList.splice(t,1),this.saveSearchList()}},mounted:function(){this.getSearchList()},components:{"user-center":p}},y=g,b=(n("a901"),Object(h["a"])(y,r,u,!1,null,null,null)),w=b.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"guide"},[n("div",{staticClass:"nar-btn"},[n("i",{staticClass:"icon icon-toggle",on:{click:t.toggleNavNarrow}})]),n("SideItem",{attrs:{list:t.prod}})],1)},_=[],k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"section"},[t._l(t.list,(function(e){return[n("router-link",{key:e.url,staticClass:"item",attrs:{to:e.url,exact:""}},[n("i",{key:e.icon,staticClass:"icon",class:e.icon}),n("span",{key:e.title},[t._v(t._s(e.title))])])]}))],2)},T=[],x={props:{list:Array}},L=x,S=(n("aa14"),n("911c"),Object(h["a"])(L,k,T,!1,null,null,null)),D=S.exports,F=n("2f62"),E={data:function(){return{prod:[{name:"Home",url:"/",title:"首页",icon:"icon-home"},{name:"Movie",url:"/movie",title:"电影",icon:"icon-movie"},{name:"Game",url:"/game",title:"游戏",icon:"icon-game"},{name:"Anime",url:"/anime",title:"动漫",icon:"icon-anime"}]}},methods:Object(a["a"])(Object(a["a"])({},Object(F["b"])(["toggleNavNarrow"])),{},{toggleNavNarrow:function(){this.$store.commit("toggleNavNarrow")},hideNav:function(){this.$store.state.hideNav&&this.$store.commit("toggleNavNarrow",!0)}}),components:{SideItem:D}},P=E,$=(n("b75e"),Object(h["a"])(P,C,_,!1,null,null,null)),M=$.exports,O=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},I=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer"},[n("div",{staticClass:"link-box wrapper"},[n("dl",[n("dt",[t._v("合作")]),n("dd",[n("a",{attrs:{href:"javascript:;"}},[t._v("关于我们")])]),n("dd",[n("a",{attrs:{href:"javascript:;"}},[t._v("联系我们")])])]),n("dl",[n("dt",[t._v("反馈")]),n("dd",[n("a",{attrs:{href:"javascript:;"}},[t._v("用户反馈")])]),n("dd",[n("a",{attrs:{href:"javascript:;"}},[t._v("功能建议")])])])]),n("div",{staticClass:"copyright"},[n("p",[t._v("私人使用，请勿随意传播本网站信息，感谢配合！")])])])}],V={},N=V,j=(n("b332"),Object(h["a"])(N,O,I,!1,null,null,null)),z=j.exports,B={computed:{classList:function(){this.$store.state.hideNav}},methods:Object(a["a"])(Object(a["a"])({},Object(F["b"])(["toggleNavNarrow","toggleNavHide"])),{},{toggleNavNarrow:function(){this.$store.state.hideNav&&this.$store.commit("toggleNavNarrow",!0)}}),components:{Header:w,SideNav:M,Footer:z}},A=B,H=(n("7c55"),n("94fb"),n("d74a"),Object(h["a"])(A,s,o,!1,null,null,null)),q=H.exports,W=(n("d3b7"),n("8c4f")),R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.playData&&t.width?n("div",{staticClass:"play-wrapper",style:{width:t.width+"px"}},[n("div",{staticClass:"play-wrapper-left"},[n("div",{ref:"container",staticClass:"player-container",class:{"wide-size":1===t.mode},style:{height:t.playerHeight+"px"}},[n("video-player",{attrs:{mode:t.mode,setScreenMode:t.setScreenMode,videoSource:t.videoSource,current:t.getEpIndex,total:t.episodeList.length-1,danmuList:t.danmuList},on:{setEpisode:t.setEpisode,sendDanmuku:t.sendDanmuku}})],1),n("video-info",{attrs:{playData:t.playData}}),n("comment-list")],1),n("div",{staticClass:"play-wrapper-right"},[n("div",{staticClass:"left-box",style:{"margin-top":(1===t.mode?t.playerHeight+15:5)+"px"}},[n("danmu-list",{attrs:{danmuList:t.danmuList}}),n("episode-list",{ref:"eplist",attrs:{currentEp:t.videoSource.ep,episodeList:t.episodeList},on:{setEpisode:t.setEpisode}})],1)])]):!t.playData&&t.width?n("not-found"):t._e()},U=[],G=(n("99af"),n("7db0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"video-player",attrs:{tabindex:"1"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.playOrPause(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])?null:(e.preventDefault(),"button"in e&&2!==e.button?null:t.setVTimeByArrowKey("right"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:(e.preventDefault(),"button"in e&&0!==e.button?null:t.setVTimeByArrowKey("left"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.setVVolumeByArrowKey("up"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.setVVolumeByArrowKey("down"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.preventDefault(),t.setScreenMode(t.mode))}]}},[n("div",{ref:"wrapper",staticClass:"video-main-wrapper",class:t.classList,style:{width:"100%",height:2===t.mode?"100vh":"100%"},attrs:{id:"video-player"},on:{mouseleave:function(e){t.controllerIsShow=!1}}},[n("div",{staticClass:"video-title",class:{show:t.controllerIsShow}},[n("span",{staticClass:"title",on:{mouseover:function(e){t.controllerIsShow=!0}}},[t._v(t._s(t.videoSource.title))])]),n("div",{ref:"player",staticClass:"video-content",on:{click:t.playOrPause,mousemove:function(e){return t.showController(!1)},mouseleave:function(e){return t.showController(!0)}}},[n("video",{ref:"video",attrs:{preload:"auto",src:t.videoSource.video}}),t.needDanmuPlay?n("DanmuPool",{ref:"danmupool",attrs:{danmu:t.danmuPool,isPlaying:t.isPlaying}}):t._e(),n("div",{staticClass:"volume-tip",class:t.showVolumeTip?"fade-out":"transparent"},[n("i",{staticClass:"icon",class:0===t.volume?"icon-mute":"icon-volume"}),n("span",[t._v(t._s(0===t.volume?"静音":parseInt(100*t.volume)+"%"))])]),t.isPlaying?t._e():n("div",{staticClass:"pause-tip"},[n("i",{staticClass:"icon icon-to-play"})]),t.isWaiting?n("div",{staticClass:"waiting-tip"},[n("svg",{staticClass:"loading is-loading",attrs:{viewBox:"0 0 128 100"}},[n("path",{staticClass:"border",attrs:{d:"M40,10 L64,25 93,25 Q108,25 108,45 L108,65 Q108,85 93,85 L35,85 Q20,85 20,65 L20,45 Q20,25 35,25 L64,25 88,10"}}),n("circle",{staticClass:"dot dot1",attrs:{cx:"46",cy:"55",r:"6"}}),n("circle",{staticClass:"dot dot2",attrs:{cx:"64",cy:"55",r:"6"}}),n("circle",{staticClass:"dot dot3",attrs:{cx:"82",cy:"55",r:"6"}})]),n("span",[t._v("视频缓冲中...")])]):t._e()],1),n("div",{staticClass:"video-controller",class:{show:t.controllerIsShow},on:{mouseover:function(e){t.controllerIsShow=!0}}},[n("ProgressBar",{attrs:{percent:t.percent,buffer:t.buffer,duration:t.duration,setVTime:t.setVTime}}),n("ControlBox",{attrs:{mode:t.mode,setScreenMode:t.setScreenMode,fullScreen:t.fullScreen,isPlaying:t.isPlaying,playOrPause:t.playOrPause,duration:t.duration,percent:t.percent,setVTime:t.setVTime,volume:t.volume,setVVolume:t.setVVolume}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.current<t.total,expression:"current < total"}],staticClass:"icon icon-play-next",attrs:{slot:"play-next"},on:{click:t.palyNextEp},slot:"play-next"}),n("CenterControl",{directives:[{name:"show",rawName:"v-show",value:2===t.mode||3===t.mode,expression:"mode === 2 || mode === 3"}],attrs:{slot:"danmu"},slot:"danmu"},[n("div",{staticClass:"center-btn"},[n("input",{staticClass:"danmu-switch-btn btn",attrs:{type:"checkbox"},domProps:{checked:t.needDanmuPlay},on:{click:function(e){return t.danmuSwitch(e.target.checked)}}})]),n("DanmuInput",{directives:[{name:"show",rawName:"v-show",value:t.showInnerDanmu,expression:"showInnerDanmu"}],attrs:{css:"transparent",danmuType:t.danmuType,danmuColor:t.danmuColor},on:{shootDanmu:t.shootDanmu,setDanmuType:t.setDanmuType},model:{value:t.danmuText,callback:function(e){t.danmuText=e},expression:"danmuText"}})],1)],1)],1)]),n("div",{staticClass:"danmu-sendbar"},[n("div",{staticClass:"danmu-sendbar-left"},[n("span",[t._v(t._s(1)+"人正在观看，"+t._s(t.danmuList.length)+"条弹幕")]),n("input",{staticClass:"danmu-switch-btn",attrs:{type:"checkbox"},domProps:{checked:t.needDanmuPlay},on:{click:function(e){return t.danmuSwitch(e.target.checked)}}})]),n("div",{staticClass:"danmu-sendbar-right"},[n("DanmuInput",{attrs:{danmuType:t.danmuType,danmuColor:t.danmuColor},on:{shootDanmu:t.shootDanmu,setDanmuType:t.setDanmuType},model:{value:t.danmuText,callback:function(e){t.danmuText=e},expression:"danmuText"}})],1)])])}),K=[],X=(n("4de4"),n("4160"),n("a9e3"),n("498a"),n("2909")),J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"progress",staticClass:"progress-bar",on:{mousedown:t.mouseDown}},[n("div",{staticClass:"progress"},[n("span",{staticClass:"buffer",style:{width:t.buffer+"%"}}),n("span",{staticClass:"current",style:{width:t.percent+"%"}})]),n("div",{staticClass:"detail-wrapper",on:{mousemove:function(e){return e.target!==e.currentTarget?null:t.mouseMove2(e)},mouseover:t.mouseOver,mouseout:t.mouseOut}},[n("div",{staticClass:"progress-detail",class:{visible:t.visible}},[n("div",{staticClass:"detail-sign",style:{left:t.signLeft+"px"}}),n("div",{ref:"info",staticClass:"detail-info",style:{left:t.infoLeft+"px"}},[n("img",{attrs:{src:"",alt:""}}),n("span",{staticClass:"dtime"},[t._v(t._s(t._f("timeFormat")(t.detailTime)))])])])])])},Y=[],Q={props:{buffer:{type:Number,default:0},percent:{type:Number,default:0},duration:{type:Number,default:0},setVTime:Function},data:function(){return{dragFlag:!1,dragPercent:0,signLeft:0,infoLeft:0,detailFlag:!1,detailTime:0,timer:null,visible:!1}},computed:{progress:function(){return this.dragFlag?this.dragPercent:this.percent}},methods:{mouseOver:function(t){var e=this;this.detailFlag=!0,this.timer=setTimeout((function(){e.visible=!0}),100)},mouseDown:function(t){if(!this.dragFlag){var e=t||window.event;this.dragPercent=e.offsetX/this.$refs.progress.offsetWidth*100,this.setVTime(this.dragPercent),this.dragFlag=!0}},mouseMove2:function(){if(this.detailFlag){var t=event||window.event,e=this.$refs.info.clientWidth/2,n=t.target.clientWidth-this.$refs.info.clientWidth/2;event.offsetX>n?this.infoLeft=n:event.offsetX<e?this.infoLeft=e:this.infoLeft=event.offsetX,this.signLeft=event.offsetX,this.detailTime=this.duration*(t.offsetX/this.$refs.progress.offsetWidth)}},mouseMove:function(t){if(this.dragFlag){var e=t||window.event,n=this.$refs.progress,i=e.clientX-n.getBoundingClientRect().left;i<0&&(i=0),i>n.offsetWidth&&(i=n.offsetWidth),this.dragPercent=i/n.offsetWidth*100,this.setVTime(this.dragPercent),window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()}},mouseUp:function(){this.dragFlag&&(this.setVTime(this.dragPercent,!0),this.dragFlag=!1)},mouseOut:function(t){clearTimeout(this.timer),this.detailFlag=!1,this.visible=!1}},filters:{timeFormat:function(t){var e=Math.floor(t/60);e<10&&(e="0"+e);var n=Math.floor(t%60);return n<10&&(n="0"+n),e+":"+n}},mounted:function(){document.addEventListener("mousemove",this.mouseMove),document.addEventListener("mouseup",this.mouseUp)},beforeDestroy:function(){document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("mouseup",this.mouseUp)}},Z=Q,tt=(n("8e52"),Object(h["a"])(Z,J,Y,!1,null,null,null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control-box"},[n("LeftControl",{attrs:{mode:t.mode,isPlaying:t.isPlaying,playOrPause:t.playOrPause,duration:t.duration,percent:t.percent,setVTime:t.setVTime}},[t._t("play-next",null,{slot:"play-next"})],2),t._t("danmu"),n("RightControl",{attrs:{volume:t.volume,setMute:t.setMute,mode:t.mode,setScreenMode:t.setScreenMode,fullScreen:t.fullScreen,setVVolume:t.setVVolume}})],2)},it=[],st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control left-control"},[n("span",{staticClass:"icon",class:t.isPlaying?"icon-pause":"icon-play",on:{click:t.playOrPause}}),t._t("play-next"),n("div",{staticClass:"time-box"},[t.isInput?n("input",{ref:"input",staticClass:"time-input",attrs:{type:"text"},domProps:{value:t._f("timeFormat")(t.time)},on:{blur:t.setTime}}):n("div",{staticClass:"time-text",on:{click:t.inputFocus}},[n("span",[t._v(t._s(t._f("timeFormat")(t.currentTime||"0")))]),n("span",{staticClass:"split"},[t._v("/")]),n("span",[t._v(t._s(t._f("timeFormat")(t.duration||"0")))])])])],2)},ot=[],at=(n("ac1f"),n("1276"),{props:{mode:Number,isPlaying:Boolean,playOrPause:Function,duration:Number,percent:Number,setVTime:Function},data:function(){return{isInput:!1,time:""}},computed:{currentTime:function(){return this.percent*this.duration/100}},methods:{inputFocus:function(){var t=this;this.isInput=!0,this.$nextTick((function(){t.time=t.currentTime,t.$refs.input.focus()}))},setTime:function(t){this.isInput=!1;for(var e=t.target.value.split(":"),n=0,i=1;i<=3;i++)e[e.length-i]&&(n+=+e[e.length-i]*Math.pow(60,i-1));n<0&&(n=0),n>this.duration&&(n=this.duration),(Math.ceil(this.time)<Math.round(n)||Math.floor(this.time)>Math.round(n))&&this.setVTime(n/this.duration*100,!0)}},filters:{timeFormat:function(t){var e=Math.floor(t/60);e<10&&(e="0"+e);var n=Math.floor(t%60);return n<10&&(n="0"+n),e+":"+n}},components:{DanmuInput:function(){return Promise.resolve().then(n.bind(null,"12fc"))}}}),rt=at,ut=(n("6b64"),Object(h["a"])(rt,st,ot,!1,null,null,null)),ct=ut.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control right-control"},[n("span",{staticClass:"icon volume-btn",class:0===t.volume?"icon-mute":"icon-volume",on:{click:function(e){return e.target!==e.currentTarget?null:t.setMute(e)}}},[n("div",{staticClass:"volume-box"},[n("div",{staticClass:"volume-num"},[t._v(t._s(parseInt(100*t.volume)))]),n("div",{ref:"volBar",staticClass:"volume-bar"},[n("div",{staticClass:"volume-bg"},[n("div",{staticClass:"volume",style:{height:100*t.volume+"%"}}),n("div",{staticClass:"volume-ball",style:{top:4*(100-100*t.volume)/5+"%"}})])])])]),3!==t.mode?[n("span",{directives:[{name:"top-toast",rawName:"v-top-toast",value:"video-player",expression:"'video-player'"}],staticClass:"icon top-toast",class:1===t.mode?"icon-wide-off":"icon-wide-on",on:{click:function(e){return t.setScreenMode(1)}}},[n("span",{staticClass:"toast"},[t._v(t._s(1!==t.mode?"宽屏模式":"退出宽屏"))])]),n("span",{directives:[{name:"top-toast",rawName:"v-top-toast",value:"video-player",expression:"'video-player'"}],staticClass:"icon top-toast",class:2===t.mode?"icon-webfull-off":"icon-webfull-on",on:{click:function(e){return t.setScreenMode(2)}}},[n("span",{staticClass:"toast"},[t._v(t._s(2!==t.mode?"网页全屏":"退出网页全屏"))])])]:t._e(),n("span",{directives:[{name:"top-toast",rawName:"v-top-toast",value:"video-player",expression:"'video-player'"}],staticClass:"icon icon-full-screen top-toast",on:{click:t.fullScreen}},[n("span",{staticClass:"toast"},[t._v(t._s(3!==t.mode?"进入全屏":"退出全屏"))])])],2)},dt=[],mt=(n("c975"),{props:{mode:Number,setScreenMode:Function,fullScreen:Function,volume:Number,setMute:Function,setVVolume:Function},data:function(){return{dragFlag:!1}},methods:{mouseDown:function(t){var e=t||window.event,n=(e.pageY-this.offset(this.$refs.volBar).top)/this.$refs.volBar.offsetHeight;n<=0&&(n=0),n>=1&&(n=1),this.setVVolume(1-n),this.dragFlag=!0},mouseMove:function(t){this.dragFlag&&(this.mouseDown(t),window.getSelection?window.getSelection().removeAllRanges():document.selection.empty())},mouseUp:function(){this.dragFlag&&(this.dragFlag=!1,Object(v["setLocal"])("sptv-volume",this.volume))},offset:function(t){var e=null,n=null,i=t.offsetParent;e+=t.offsetLeft,n+=t.offsetTop;while(i)-1===navigator.userAgent.indexOf("MSIE 8.0")&&(e+=i.clientLeft,n+=i.clientTop),e+=i.offsetLeft,n+=i.offsetTop,i=i.offsetParent;return{left:e,top:n}}},mounted:function(){this.$refs.volBar.addEventListener("mousedown",this.mouseDown),document.addEventListener("mousemove",this.mouseMove),document.addEventListener("mouseup",this.mouseUp)},beforeDestroy:function(){this.$refs.volBar.removeEventListener("mousedown",this.mouseDown),document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("mouseup",this.mouseUp)}}),ht=mt,ft=(n("2053"),Object(h["a"])(ht,lt,dt,!1,null,null,null)),pt=ft.exports,vt={props:{mode:Number,isPlaying:Boolean,playOrPause:Function,setScreenMode:Function,fullScreen:Function,duration:Number,percent:Number,setVTime:Function,setVVolume:Function,volume:Number},data:function(){return{lastVolume:0}},methods:{setMute:function(){0!==this.volume?(this.lastVolume=this.volume,this.setVVolume(0)):this.setVVolume(this.lastVolume)}},components:{LeftControl:ct,RightControl:pt}},gt=vt,yt=(n("c754"),Object(h["a"])(gt,nt,it,!1,null,null,null)),bt=yt.exports,wt=(n("8529"),n("12fc")),Ct=n("bc3a"),_t=n.n(Ct),kt={props:{mode:{type:Number,default:0},setScreenMode:Function,videoSource:Object,current:Number,total:Number,setEpisode:Function,sendDanmuku:Function,danmuList:{type:Array,default:function(){return[]}}},data:function(){return{playerHeight:0,isPlaying:!1,canPlay:!1,autoPlay:!0,isWaiting:!0,duration:0,currentTime:0,percent:0,buffer:0,isDrag:!1,volume:1,danmuText:"",danmuType:"roll",danmuColor:"#FFFFFF",showInnerDanmu:!0,controllerIsShow:!1,controlTimer:null,volumeInfoTimer:null,showVolumeTip:!1,danmuPool:[],danmuTimer:null,needDanmuPlay:!0}},watch:{mode:function(){var t=this;0!==this.mode&&1!==this.mode||this.$nextTick((function(){t.playerHeight=.5625*t.$refs.wrapper.clientWidth}))},danmuList:function(){},isPlaying:{handler:function(t){this.addToDanmuPool()}},$route:{handler:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{query:{ep:void 0}};t.query.ep!==n.query.ep&&this.$nextTick((function(){e.$refs.video.play(),e.isPlaying=!0}))}}},methods:{setDanmuType:function(t,e){this.danmuType=t,this.danmuColor=e},danmuSwitch:function(t){this.needDanmuPlay=t,this.danmuPool=[]},shootDanmu:function(){var t=this.danmuText.trim();t&&this.needDanmuPlay&&(this.$emit("sendDanmuku",this.danmuType,{color:this.danmuColor},this.danmuText,this.currentTime),this.danmuText="")},setVVolume:function(t){0===t?this.$refs.video.muted=!0:(this.$refs.video.muted=!1,this.$refs.video.volume=t),this.volume=t},setVVolumeByArrowKey:function(t){var e=this,n=100*this.volume;"up"===t?n+=10:n-=10,n=n>100?100:n,n=n<0?0:n,this.setVVolume(n/100),this.showVolumeTip=!0,clearTimeout(this.volumeInfoTimer),this.volumeInfoTimer=setTimeout((function(){e.showVolumeTip=!1}),1e3)},playOrPause:function(){this.isPlaying?this.$refs.video.pause():this.$refs.video.play(),this.isPlaying=!this.isPlaying},setVTime:function(t,e){this.percent=t,this.isDrag=!0,e&&(this.$refs.video.currentTime=this.duration*(t/100),this.$refs.video.play(),this.isPlaying=!0,this.isDrag=!1),this.$refs.danmupool.init()},setVTimeByArrowKey:function(t){"left"===t?this.$refs.video.currentTime-=5:this.$refs.video.currentTime+=5,this.$refs.video.play(),this.isPlaying=!0,this.$refs.danmupool.init()},updateProgressBar:function(){this.isDrag||(this.currentTime=this.$refs.video.currentTime,this.percent=this.currentTime/this.duration*100),this.getVBuffer()},getVDurdation:function(){this.duration=this.$refs.video.duration,this.canPlay=!0,this.isWaiting=!1},getVBuffer:function(){var t=this.$refs.video,e=t.buffered;if(e.length)for(var n=0;n<e.length;n++)if(e.start(e.length-1-n)<t.currentTime){this.buffer=e.end(e.length-1-n)/t.duration*100;break}},waitingBuffer:function(){this.isWaiting=!0},palyNextEp:function(){this.$emit("setEpisode",null,!0)},videoEnded:function(){this.autoPlay&&this.current<this.total&&this.palyNextEp()},fullScreen:function(){var t=!!(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen);if(t)document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var e=this.$refs.wrapper;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}},fullScreenChange:function(){this.setScreenMode(3)},windowResize:function(){if(2===this.mode){var t=document.documentElement||document.body;this.showInnerDanmu=t.offsetWidth>1024}this.playerHeight=.5625*this.$refs.wrapper.clientWidth},showController:function(t){var e=this;this.canPlay&&(this.controllerIsShow=!0,clearTimeout(this.controlTimer),t||(this.controlTimer=setTimeout((function(){e.controllerIsShow=!1}),800)))},addToDanmuPool:function(){var t=this;clearInterval(this.danmuTimer),this.needDanmuPlay&&(this.danmuTimer=setInterval((function(){if(t.isPlaying){var e,n=Math.floor(t.currentTime),i=t.danmuList.filter((function(t){return Math.floor(t.vtime)===n}));if(i.length>0)(e=t.danmuPool).push.apply(e,Object(X["a"])(i))}}),1e3))}},filters:{timeFormat:function(t){var e=Math.floor(t/60);e<10&&(e="0"+e);var n=Math.floor(t%60);return n<10&&(n="0"+n),e+":"+n}},computed:{classList:function(){return 2===this.mode?"full-webpage":3===this.mode?"full-window":""}},mounted:function(){var t=this,e=Object(v["getLocal"])("sptv-volume");this.setVVolume(this.volume=null!=e?e:1);var n=this.$refs.video;n.addEventListener("canplay",this.getVDurdation),n.addEventListener("timeupdate",this.updateProgressBar),n.addEventListener("waiting",this.waitingBuffer),n.addEventListener("ended",this.videoEnded),this.addToDanmuPool(),["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"].forEach((function(e){document.addEventListener(e,t.fullScreenChange)})),this.windowResize(),window.addEventListener("resize",this.windowResize)},beforeDestroy:function(){var t=this,e=this.$refs.video;e.removeEventListener("canplay",this.getVDurdation),e.removeEventListener("timeupdate",this.updateProgressBar),e.removeEventListener("waiting",this.waitingBuffer),e.removeEventListener("ended",this.videoEnded),["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"].forEach((function(e){document.removeEventListener(e,t.fullScreenChange)})),window.removeEventListener("resize",this.windowResize)},components:{ProgressBar:et,ControlBox:bt,DanmuInput:wt["default"],DanmuPool:function(){return n.e("chunk-3bececd4").then(n.bind(null,"569d"))},CenterControl:function(){return Promise.resolve().then(n.bind(null,"8529"))}}},Tt=kt,xt=(n("6974"),Object(h["a"])(Tt,G,K,!1,null,null,null)),Lt=xt.exports,St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"comment-wrapper",staticClass:"comment-wrapper margin"},[n("h3",{staticClass:"title"},[t._v(t._s(t.allTotal)+" 评论")]),t.mainTotal>t.limit?n("PagingCom",{attrs:{type:"mini",currentPage:t.currentPage,totalPage:Math.floor(t.mainTotal/t.limit+1)},on:{pageChange:t.getMainComment}}):t._e(),n("CommentInput",{attrs:{submitComment:t.makeMainComment,borderb:!0},model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}}),t.mainTotal>0?n("MainComment",{ref:"comment",attrs:{commentData:t.commentData,getSubComment:t.getSubComment},on:{submitComment:t.submitComment,watchCommentHeight:t.watchCommentHeight}}):n("div",{staticClass:"no-reply"},[t._v("还没有评论，快来抢占沙发吧！")]),t.showDownInput&&t.allTotal?n("CommentInput",{attrs:{submitComment:t.makeMainComment},model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}}):t._e(),t.mainTotal>t.limit?n("PagingCom",{attrs:{currentPage:t.currentPage,totalPage:Math.floor(t.mainTotal/t.limit+1)},on:{pageChange:t.getMainComment}}):t._e()],1)},Dt=[],Ft={data:function(){return{currentPage:1,mainTotal:0,allTotal:0,limit:1,commentData:null,commentText:"",showDownInput:!1}},watch:{$route:function(){this.currentPage=1,this.mainTotal=0,this.allTotal=0,this.limit=0,this.commentData=null,this.commentText="",this.getMainComment(1)},currentPage:function(){this.scrollToTop()}},methods:{getMainComment:function(t){var e=this;this.currentPage=t,_t.a.get("http://localhost:3000/api/comment/main?pId=".concat(this.$route.params.id,"&ep=").concat(this.$route.query.ep,"&page=").concat(t)).then((function(t){t.status;var n=t.data;e.$refs.comment&&e.$refs.comment.clearInputId(),n.errno||(e.commentData=n.data.comments,e.allTotal=n.data.all_total,e.mainTotal=n.data.total,e.limit=n.data.limit)}))},getSubComment:function(t,e){var n=this;_t.a.get("http://localhost:3000/api/comment/sub?cId=".concat(t,"&page=").concat(e)).then((function(e){200!==e.status||e.data.errno||(n.commentData.find((function(e){return e.id===t})).children=e.data.data)}))},makeMainComment:function(){this.commentText.trim()&&(this.submitComment(this.commentText,null),this.commentText="")},submitComment:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=this.$route.params.id,o=this.$route.query.ep,a=1;_t.a.post("http://localhost:3000/api/comment/new",{playId:s,ep:o,content:t,userId:a,beUserId:n,mainId:i}).then((function(t){if(!t.data.errno){if(n||i){var s,o=e.getMainIndex(i);(s=e.commentData[o].children.comments).push.apply(s,Object(X["a"])(t.data.data))}else{var a=t.data.data[0];a.children={page:1,limit:3,total:0,comments:[]},e.commentData.unshift(a),e.scrollToTop()}e.allTotal++}}))},getMainIndex:function(t){var e=this.commentData.length;if(e)while(e--)if(this.commentData[e].id===t)return e;return-1},scrollToTop:function(){window.scrollTo(0,this.$refs["comment-wrapper"].offsetTop)},watchCommentHeight:function(t){this.showDownInput=t}},mounted:function(){this.getMainComment(1)},components:{PagingCom:function(){return n.e("chunk-e1702c02").then(n.bind(null,"79fc"))},MainComment:function(){return n.e("chunk-3e22c0ac").then(n.bind(null,"882f"))},CommentInput:function(){return n.e("chunk-6b5519b9").then(n.bind(null,"c0bd"))}}},Et=Ft,Pt=(n("97b8"),Object(h["a"])(Et,St,Dt,!1,null,"770d9746",null)),$t=Pt.exports,Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"video-info-wrapper"},[n("div",{staticClass:"video-info"},[n("img",{attrs:{src:t.playData.img}}),n("div",{staticClass:"video-info-right"},[n("div",{staticClass:"media-tool-bar"},[n("a",{attrs:{href:"#"}},[t._v(t._s(t.playData.title))])]),n("div",{staticClass:"video-count"},[t._v(t._s(t._f("numFormat")(t.playData.pCount))+"播放 · "+t._s(t._f("numFormat")(t.playData.dCount))+"弹幕 · "+t._s(t._f("numFormat")(t.playData.cCount))+"追番")]),n("div",{staticClass:"pub-wrapper"},[n("a",{attrs:{href:"#"}},[t._v(t._s(t.playData.type))]),n("div",{staticClass:"pub-info"},[t._v(t._s(t.playData.status?"完结":"连载中"))])]),n("a",{attrs:{href:"#"}},[t._v(t._s(t.playData.description))]),n("div",{staticClass:"video-rating"},[n("h4",[t._v(t._s(t.playData.score))]),n("p",[t._v(t._s(t._f("numFormat")(t.playData.sCount))+"人评分")])])])])])},Ot=[],It=(n("b680"),{props:{playData:Object},filters:{numFormat:function(t){return t<1e4?t:t<1e8?(t/1e4).toFixed(1)+"万":(t/1e8).toFixed(1)+"亿"}}}),Vt=It,Nt=(n("d5dc"),Object(h["a"])(Vt,Mt,Ot,!1,null,"4999a734",null)),jt=Nt.exports,zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"danmu-list-wrapper"},[n("div",{staticClass:"v-barrage",on:{click:function(e){t.isShow=!t.isShow}}},[n("div",[t._v("弹幕列表")]),n("span",[t._v(t._s(t.isShow?"收起":"展开"))])]),n("div",{staticClass:"v-barrage-list",style:t.isShow?"":"height:0"},[n("div",{staticClass:"title"},[n("span",[t._v("时间")]),n("span",[t._v("弹幕内容("+t._s(t.danmuList.length)+")")]),n("span",[t._v("发送时间")])]),n("ul",{staticClass:"content"},t._l(t.danmuList,(function(e,i){return n("li",{key:i},[n("span",[t._v(t._s(t._f("v_timeFormat")(e.vtime)))]),n("span",{attrs:{title:e.content}},[t._v(t._s(e.content))]),n("span",[t._v(t._s(t._f("s_timeFormat")(e.stime)))])])})),0)])])},Bt=[],At={props:{danmuList:{type:Array,default:function(){return[]}}},data:function(){return{isShow:!1}},filters:{v_timeFormat:function(t){var e=Math.floor(t/60);e<10&&(e="0"+e);var n=Math.floor(t%60);return n<10&&(n="0"+n),e+":"+n},s_timeFormat:function(t){var e=new Date(t),n=a(e.getMonth()+1),i=a(e.getDate()),s=a(e.getHours()),o=a(e.getMinutes());return"".concat(n,"-").concat(i," ").concat(s,":").concat(o);function a(t){return t<10?"0"+t:t}}}},Ht=At,qt=(n("8e62"),Object(h["a"])(Ht,zt,Bt,!1,null,"c1a5150c",null)),Wt=qt.exports,Rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.episodeList.length>1?n("div",{staticClass:"episode-list-wrapper"},[n("div",{staticClass:"episode-list-title"},[n("span",{staticClass:"title"},[t._v("选集")]),n("i",{staticClass:"icon",class:t.isGridLayout?"icon-grid":"icon-item",on:{click:t.switchLayout}})]),n("div",{ref:"scroll",staticClass:"episode-list-content"},[n("div",{class:t.isGridLayout?"grid-layout":"list-layout"},t._l(t.episodeList,(function(e,i){return n("a",{key:e.ep,class:t.currentEp===e.ep?"current":"",attrs:{href:t.$route.path+"?ep="+e.ep},on:{click:function(n){return n.preventDefault(),t.episodeClick(e.ep,i)}}},[t.isGridLayout?n("span",[t._v(t._s(e.ep))]):n("span",[t._v("第 "+t._s(e.ep)+" 话 "+t._s(e.title))])])})),0)])]):t._e()},Ut=[],Gt={props:{currentEp:{type:Number},episodeList:{type:Array},setEpisode:{type:Function}},data:function(){return{isGridLayout:!0,index:0}},watch:{},methods:{getLayout:function(){var t=Object(v["getLocal"])("sftv-eptype");this.isGridLayout=null==t||t},switchLayout:function(){this.isGridLayout=!this.isGridLayout,this.scrollToY(this.index)},setLayout:function(){Object(v["setLocal"])("sftv-eptype",this.isGridLayout)},episodeClick:function(t,e){t!==this.currentEp&&this.$emit("setEpisode",t)},scrollToY:function(t){var e=this;this.index=t,this.$nextTick((function(){var n=e.isGridLayout?38*(parseInt(t/4)-4):26*(t-4);e.$refs.scroll.scrollTo(0,n)}))}},mounted:function(){this.getLayout()},beforeDestroy:function(){this.setLayout()}},Kt=Gt,Xt=(n("864c"),Object(h["a"])(Kt,Rt,Ut,!1,null,null,null)),Jt=Xt.exports,Yt={data:function(){return{mode:0,minWidth:980,maxWidth:1488,width:0,lastMode:0,playerHeight:0,danmuList:[],videoSource:{},episodeList:[],playData:null,timer:null}},methods:{setScreenMode:function(t){this.mode!==t?(2===this.mode&&3===t||(this.lastMode=this.mode),this.mode=t):this.mode=1===t?0:this.lastMode},getSize:function(){var t=.8*document.body.clientWidth;t<this.minWidth?t=this.minWidth:t>this.maxWidth&&(t=this.maxWidth),this.width=t,this.playerHeight=1===this.mode?.59*t:.59*(t-320)},resize:function(){var t=this;1!==this.mode&&0!==this.mode||(this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){t.getSize()}),200))},getEpisodeData:function(){var t=this;_t.a.get("http://localhost:3000/api/play/list?pId=".concat(this.$route.params.id)).then((function(e){e.data.errno?t.success=!1:(t.playData=e.data.data.play,t.episodeList=e.data.data.eps,t.success=!0,t.redirect())}))},redirect:function(){var t=this;if(this.episodeList.length){var e,n=this.episodeList.find((function(e){return e.ep===+t.$route.query.ep}));null==n?(this.$router.push({query:{ep:this.episodeList[0].ep}}),this.videoSource=this.episodeList[0]):this.videoSource=n,document.title="正在播放：".concat(this.playData.title," 第").concat(this.videoSource.ep,"话"),this.getDanmaku(this.videoSource.id),null===(e=this.$refs.eplist)||void 0===e||e.scrollToY(this.getEpIndex)}},setEpisode:function(t,e){if(e){var n=this.episodeList[this.getEpIndex+1];this.videoSource=n,t=n.ep}else this.videoSource=this.episodeList.find((function(e){return e.ep===t}));this.$router.push({query:{ep:t}}),document.title="正在播放：".concat(this.playData.title," 第").concat(this.videoSource.ep,"话"),this.getDanmaku(this.videoSource.id),this.$refs.eplist.scrollToY(this.getEpIndex)},getDanmaku:function(t){var e=this;this.$route;_t.a.get("http://localhost:3000/api/danmaku/list?vId=".concat(t)).then((function(t){t.data&&(e.danmuList=t.data.data)}))},sendDanmuku:function(t,e,n,i){var s=this;_t.a.post("http://localhost:3000/api/danmaku/new",{type:t,style:e,content:n,vtime:i,uId:1,vId:this.videoSource.id}).then((function(t){if(200===t.status&&!t.data.errno){var e=t.data.data[0];e.isCurr=!0,s.danmuList.push(e)}}))}},computed:{getEpIndex:function(){var t=this.episodeList.length;if(t)while(t--)if(this.episodeList[t].ep===this.videoSource.ep)return t;return-1}},watch:{mode:function(){var t=document.documentElement||document.body;2===this.mode?t.style.overflow="hidden":t.style.overflow="auto",1!==this.mode&&0!==this.mode||this.getSize()}},mounted:function(){this.getEpisodeData(),this.getSize(),window.addEventListener("resize",this.resize)},beforeDestroy:function(){window.removeEventListener("resize",this.resize)},components:{"video-player":Lt,"comment-list":$t,"video-info":jt,"danmu-list":Wt,"episode-list":Jt,"not-found":function(){return n.e("chunk-ce90f6ac").then(n.bind(null,"be4d"))}}},Qt=Yt,Zt=(n("09fb"),Object(h["a"])(Qt,R,U,!1,null,null,null)),te=Zt.exports;i["a"].use(W["a"]);var ee=[{path:"/",name:"Anime",component:function(){return n.e("chunk-5b127eb3").then(n.bind(null,"6f36"))}},{path:"/play/:id",name:"Play",component:te},{path:"/login",name:"Login",component:function(){return n.e("chunk-28f043b5").then(n.bind(null,"48ca"))},meta:{title:"悠闲悠闲动漫网",keepAlive:!0}},{path:"/anime/index",name:"Indexes",component:function(){return n.e("chunk-0d609f46").then(n.bind(null,"8f6e"))}},{path:"*",name:"404",component:function(){return n.e("chunk-ce90f6ac").then(n.bind(null,"be4d"))}}],ne=new W["a"]({mode:"history",base:"/",routes:ee});ne.beforeEach((function(t,e,n){n()}));var ie=ne;i["a"].use(F["a"]);var se=new F["a"].Store({state:{isLogin:!1,token:""},mutations:{setToken:function(t,e){t.token=e,t.isLogin=!0,Object(v["setLocal"])("ease_token",e)},delToken:function(t){t.token="",t.isLogin=!1,Object(v["delSession"])("ease_token")}},actions:{},modules:{}});n("710a");i["a"].config.productionTip=!1,i["a"].directive("top-toast",{inserted:function(t,e){var n=e.value;t.style.position="relative";var i=document.querySelector("#".concat(n)).getBoundingClientRect(),s=t.children[0].getBoundingClientRect();s.right>i.right?t.children[0].style.left="calc(50% - ".concat(s.right-i.right+5,"px)"):s.left<i.left&&(t.children[0].style.left="calc(50% + ".concat(i.left-s.left+5,"px)"))}}),new i["a"]({router:ie,store:se,render:function(t){return t(q)}}).$mount("#app")},"5c44":function(t,e,n){},"68fe":function(t,e){function n(t,e){window.localStorage.setItem(t,JSON.stringify(e))}function i(t){return JSON.parse(window.localStorage.getItem(t))}function s(t){window.localStorage.removeItem(t)}function o(t,e){window.sessionStorage.setItem(t,JSON.stringify(e))}function a(t){return JSON.parse(window.sessionStorage.getItem(t))}function r(t){window.sessionStorage.removeItem(t)}t.exports={setLocal:n,getLocal:i,delLocl:s,setSession:o,getSession:a,delSession:r}},6974:function(t,e,n){"use strict";var i=n("ee7b"),s=n.n(i);s.a},"6b64":function(t,e,n){"use strict";var i=n("19c7"),s=n.n(i);s.a},"710a":function(t,e,n){},"75c4":function(t,e,n){},"7c55":function(t,e,n){"use strict";var i=n("2395"),s=n.n(i);s.a},8529:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"center-control"},[t._t("default"),t._t("danmu")],2)},s=[],o={props:{},data:function(){return{}}},a=o,r=(n("f272"),n("2877")),u=Object(r["a"])(a,i,s,!1,null,null,null);e["default"]=u.exports},"864c":function(t,e,n){"use strict";var i=n("8f0d"),s=n.n(i);s.a},"8b7a":function(t,e,n){},"8e52":function(t,e,n){"use strict";var i=n("75c4"),s=n.n(i);s.a},"8e62":function(t,e,n){"use strict";var i=n("3069"),s=n.n(i);s.a},"8f0d":function(t,e,n){},"911c":function(t,e,n){"use strict";var i=n("98df"),s=n.n(i);s.a},"91ca":function(t,e,n){"use strict";var i=n("f131"),s=n.n(i);s.a},"94fb":function(t,e,n){"use strict";var i=n("3ea0"),s=n.n(i);s.a},"97b8":function(t,e,n){"use strict";var i=n("4a6b"),s=n.n(i);s.a},9841:function(t,e,n){t.exports=n.p+"img/akari.a60613b4.jpg"},"98df":function(t,e,n){},a901:function(t,e,n){"use strict";var i=n("328b"),s=n.n(i);s.a},aa14:function(t,e,n){"use strict";var i=n("2af4"),s=n.n(i);s.a},acab:function(t,e,n){"use strict";var i=n("3251"),s=n.n(i);s.a},ae42:function(t,e,n){},b332:function(t,e,n){"use strict";var i=n("b70b"),s=n.n(i);s.a},b70b:function(t,e,n){},b75e:function(t,e,n){"use strict";var i=n("efad"),s=n.n(i);s.a},c754:function(t,e,n){"use strict";var i=n("8b7a"),s=n.n(i);s.a},c960:function(t,e,n){},d5dc:function(t,e,n){"use strict";var i=n("f36c"),s=n.n(i);s.a},d74a:function(t,e,n){"use strict";var i=n("ae42"),s=n.n(i);s.a},ee7b:function(t,e,n){},efad:function(t,e,n){},f131:function(t,e,n){},f272:function(t,e,n){"use strict";var i=n("5c44"),s=n.n(i);s.a},f36c:function(t,e,n){}});
//# sourceMappingURL=app.ac7edccd.js.map